---
title: "【Flutter】配列の使い方、便利な関数一覧"
emoji: "🎉"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Flutter", "Dart"]
published: true
---
## はじめに
Flutterで開発をしていて、配列操作の関数を忘れるので、
1. メモ代わり
2. 知識定着のため

を理由に書いております。
間違えている点や、追加してほしい関数などがありましたらお気軽にコメントください🙂
他にも使用した関数が増えれば追加しようと思います！

## データを追加する
:::details add | データを一つ追加する
リストの一番後ろに追加します。
```dart:
final numbers = <int>[1, 2, 3];
numbers.add(4);
print(numbers); // [1, 2, 3, 4]
```
:::

:::details addAll | データを複数追加する
こちらも同様一番後ろに追加します。
```dart:
final numbers = <int>[1, 2, 3];
numbers.addAll([4, 5, 6]);
print(numbers); // [1, 2, 3, 4, 5, 6]
```
:::

:::details insert | 指定した番号にデータを一つ追加する
配列のindex番号を指定して、その場所に新しい要素を追加します。
下記の例では`index = 2`なので0から数えて3番目に`10`という要素を追加しています。
```dart
final numbers = <int>[1, 2, 3, 4];
const index = 2;
numbers.insert(index, 10);
print(numbers); // [1, 2, 10, 3, 4]
```
:::

:::details insertAll | 指定した番号にデータを複数追加する
`insert`関数の複数版です。
```dart
final numbers = <int>[1, 2, 3, 4];
final insertItems = [10, 11];
numbers.insertAll(2, insertItems);
print(numbers); // [1, 2, 10, 11, 3, 4]
```
:::


## データを削除する
:::details clear | 配列の中身を全て削除する
その名の通り、配列の中身を全て削除し、空の配列にします。
```dart
final numbers = <int>[1, 2, 3];
numbers.clear();
print(numbers.length); // 0
print(numbers); // []
```
:::

:::details remove | 指定した要素を削除する
私は知らなかったのですが、リストから指定した要素を消してくれるだけでなく、削除できたかどうか（指定した要素があったかどうか）の`bool`を返してくれるみたいです。
```dart
final parts = <String>['head', 'shoulders', 'knees', 'toes'];
final retVal = parts.remove('head'); // true
print(parts); // [shoulders, knees, toes]
The method has no effect if [value] was not in the list.

final parts = <String>['shoulders', 'knees', 'toes'];
// Note: 'head' has already been removed.
final retVal = parts.remove('head'); // false
```
:::

:::details removeAt | 指定したindex番号の要素を削除する
配列の番号を指定して、その番号の要素を削除してくれる関数です。こちらも知らなかったのですが、削除した要素を返してくれるみたいです。
```dart
final parts = <String>['head', 'shoulder', 'knees', 'toes'];
final retVal = parts.removeAt(2); // knees
print(parts); // [head, shoulder, toes]
```
:::

:::details removeLast | 配列の最後の要素を削除する
配列の最後の要素を削除し、削除した要素を返してくれます。
```dart
final parts = <String>['head', 'shoulder', 'knees', 'toes'];
final retVal = parts.removeLast(); // toes
```
:::

:::details removeRange | 範囲を指定して削除する
`removeRange(start, end)`なんですが、endの配列番号の要素は消さないというところがなんともややこしいです。
簡単な覚え方としては上記のremoveRange(1,4)の例だと、
[1, 2, 3, 4, 5]の１番目の[2]から`end(4) - start(1)`をした3つ分消しますよということ。
2から3つ消すので2と3と4が消えて、[1, 5]になると考えると覚えやすいです。
```dart
final numbers = <int>[1, 2, 3, 4, 5];
numbers.removeRange(1, 4);
print(numbers); // [1, 5]
```
:::

:::details removeWhere | 指定した条件に当てはまるものを全て削除する
条件を指定して、その条件に当てはまる要素を全て削除する関数です。下記の例だと、文字数が3文字のものを削除しています。文字数が3文字の`one`、`two`が削除され、新しい配列ができています。返り値はありません。
```dart
final numbers = <String>['one', 'two', 'three', 'four'];
numbers.removeWhere((item) => item.length == 3);
print(numbers); // [three, four]
```
:::

## 要素を探す
:::details contains | 指定したものがリストにあるかどうかをboolで返す
指定したものがリストにあれば`true`を、なければ`false`を返す関数です。
下記例では`gasPlanets`というMapに対して、
1. `key`が`1`の要素はあるか？ => true
2. `key`が`5`の要素はあるか？ => false
3. `value`が`Jupiter`の要素はあるか？ => true
4. `value`が`Merucy`の要素はあるか？ => false
となってます。
```dart
final gasPlanets = <int, String>{1: 'Jupiter', 2: 'Saturn'};
final containsOne = gasPlanets.keys.contains(1); // true
final containsFive = gasPlanets.keys.contains(5); // false
final containsJupiter = gasPlanets.values.contains('Jupiter'); // true
final containsMercury = gasPlanets.values.contains('Mercury'); // false
```
:::

:::details firstWhere | 指定した条件に当てはまった要素を返す
配列の最初から確認し、一番初めに条件に当てはまった要素を返してくれます。
条件に当てはまった時点で終了します。
`orElse`を書くと、条件に当てはまるものがなかった時の返り値を指定することができます。
下記、一番下の例の場合、当てはまる条件がなければ`-1`を返します。
```dart
final numbers = <int>[1, 2, 3, 5, 6, 7];
var result = numbers.firstWhere((element) => element < 5); // 1
result = numbers.firstWhere((element) => element > 5); // 6
result =
    numbers.firstWhere((element) => element > 10, orElse: () => -1); // -1
```
-----
#### 条件に一致しないときにnullを返す方法
上記の例で`null`を返したい時は`firstWhere`関数の第２引数である`orElse`を使用します。
下記の例だと、`numbers`の中から`4`を探していますが、ないので`null`が返されます。
元々定義している`numbers`リストが`int`型でnullableではないので、`int?`型に`cast`しないといけない点がややこしいです。
```dart
final numbers = <int>[1, 2, 3, 5, 6, 7];
int? result = numbers.cast<int?>().firstWhere((element) =>
    element == 4, 
    orElse: () => null
); // null
```
:::

## 要素を並び替える
:::details sort | compare関数で指定された順序でソートする
`(a, b)`が分かりにくいかもしれませんが、下記の一番上の例で言うと
1回目. `(a, b)` => `(two, three)`
2回目. `(a, b)` => `(three, four)`
`compareTo`関数は中身の要素と比較して、大きければ`1`を返し、小さければ`-1`を返す関数です。
同じ数字なら`0`を返します。
下記2番目の例のように、sortする配列が数字であれば、`sort`関数を呼び出すだけで並び替えてくれます。
```dart
final numbers = <String>['two', 'three', 'four'];
// Sort from shortest to longest.
numbers.sort((a, b) => a.length.compareTo(b.length));
print(numbers); // [two, four, three]

final numbers = <int>[13, 2, -11, 0];
numbers.sort();
print(numbers); // [-11, 0, 2, 13]

final numbers = <String>['one', 'two', 'three', 'four'];
numbers.sort((a, b) => a.length.compareTo(b.length));
print(numbers); // [one, two, four, three] OR [two, one, four, three]
```
:::

## その他、便利？な関数
:::details asMap | 配列をMapに変換する
配列を`Map`にして返します。`key`の値はindex番号になります。
```dart
var words = <String>['fee', 'fi', 'fo', 'fum'];
var map = words.asMap();  // {0: fee, 1: fi, 2: fo, 3: fum}
map.keys.toList(); // [0, 1, 2, 3]
```
:::
